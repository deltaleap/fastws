https://github.com/jeremyhahn/cwebsocket/blob/master/src/cwebsocket/client.c